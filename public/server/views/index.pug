extends layout

block content
    -
        var watching = animes
           .filter(anime => anime.watched < (anime.episodes_aired || anime.episodes))
           .sort((a, b) =>  a.lastWatched && b.lastWatched ? b.lastWatched - a.lastWatched : 
                            a.lastWatched ? -1 :
                            b.lastWatched ? 1 : 
                            0)
           .slice(0, 10)
    .start
        h4 Смотрю
        .watching.d-flex.mb-3.pb-2
            each anime in watching
                a.card(href='/anime/' + anime.id)
                    img.card-img(src='https://shikimori.org/' + anime.image.original, alt=anime.name)
                    .card-body.card-img-overlay
                        h4.card-title= anime.russian
                        h6.card-subtitle.mb-2.text-muted= anime.name
                        p.card-text= `${anime.watched} / ${(anime.episodes_aired || anime.episodes)}`
        h4 Избранное аниме
        .cards-wrap
            .card-columns
                each anime in animes
                    a.card(href='/anime/' + anime.id)
                        img.card-img(src='https://shikimori.org/' + anime.image.original, alt=anime.name)
                        .card-body.card-img-overlay
                            h4.card-title= anime.russian
                            h6.card-subtitle.mb-2.text-muted= anime.name